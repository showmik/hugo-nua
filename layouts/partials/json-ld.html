<script type="application/ld+json">
{{- if .IsHome -}}
  {{- $data := dict
      "@context" "https://schema.org"
      "@type" "WebSite"
      "name"        .Site.Title
      "url"         (absURL "")
      "description" (or .Site.Params.description .Site.Params.tagline)
      "inLanguage"  .Site.LanguageCode
      "publisher"   (dict "@type" "Organization" "name" .Site.Title)
  -}}
  {{- $data | jsonify -}}
{{- else -}}
  {{- $img  := (or .Params.image .Site.Params.image) | absURL -}}
  {{- $desc := or .Params.description (.Summary | plainify) -}}
  {{- $authorName := or .Params.author.name .Site.Params.author.name -}}
  {{- $data := dict
      "@context" "https://schema.org"
      "@type" "Article"
      "mainEntityOfPage" (dict "@type" "WebPage" "@id" .Permalink)
      "headline"     .Title
      "description"  $desc
      "image"        (dict "@type" "ImageObject" "url" $img "height" 800 "width" 1200)
      "author"       (dict "@type" "Person" "name" $authorName)
      "datePublished" (.Date.Format "2006-01-02T15:04:05Z07:00")
      "dateModified"  (.Lastmod.Format "2006-01-02T15:04:05Z07:00")
      "inLanguage"    .Site.LanguageCode
      "publisher"     (dict "@type" "Organization" "name" .Site.Title)
  -}}
  {{- $data | jsonify -}}
{{- end -}}
</script>
